(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{"6oFb":function(e,t,n){"use strict";var a=n("pVnL"),o=n.n(a),i=n("QILm"),s=n.n(i),r=n("lSNA"),l=n.n(r),c=n("cDcd"),u=n.n(c),m=n("ANjH"),p=n("17x9"),d=n.n(p),h=n("KYPV"),b=n("f0wr"),g=n("N/wF"),f=n("OEX3"),v=n("qZTp"),y=n("jx0p"),E=n("bh43");n("UT2+");class N extends c.Component{constructor(){super(...arguments),l()(this,"state",void 0),l()(this,"state",{isFormOpen:!1}),l()(this,"toastTimeout",void 0),l()(this,"toast",new b.a({type:"basic",placement:"topRight",closable:!0})),l()(this,"openFormDialog",()=>{(0,this.props.sendMetrics)("Click","OpenProfileModal"),this.toggleFormDialog(!0)}),l()(this,"closeFormDialog",e=>{let t=e.handleReset;(0,this.props.sendMetrics)("Click","CloseProfileModal"),t(),this.toggleFormDialog(!1)}),l()(this,"sendSubmitMetrics",()=>{(0,this.props.sendMetrics)("Click","SaveUpdateProfileButton")}),l()(this,"onSubmit",(e,t)=>{const n=this.props,a=n.onSubmit,o=n.profileActions,i=n.mapValues,s=n.onSuccess,r=n.onFailure,l=n.sendMetrics,c=n.toastMessages,u=c.submit,m=c.success,p=c.error;l("Click","UpdateProfile"),a&&a();let d=e;i&&(d=i(e)),u&&this.toast.update({message:u,icon:"ui-icon-loading"}),o.updateProfile("me",d).then(()=>{this.toastTimeout=setTimeout(()=>{t.setSubmitting(!1),m&&this.toast.update({type:"success_strong",message:m,icon:"ui-icon-success",duration:2}),this.toggleFormDialog(!1),s&&s(e)},500)},()=>{this.toastTimeout=setTimeout(()=>{t.setSubmitting(!1),p&&this.toast.update({type:"error_strong",icon:"ui-icon-error",message:p,duration:2}),r&&r()},500)})}),l()(this,"onReset",()=>{const e=this.props.onReset;e&&e()})}toggleFormDialog(e){this.setState({isFormOpen:e})}componentWillUnmount(){this.toastTimeout&&clearTimeout(this.toastTimeout)}render(){const e=this.state.isFormOpen,t=this.props,n=t.children,a=t.title,i=t.triggerElement,r=t.size,l=t.initialValues,c=t.validate,m=(t.toastMessages,t.isCustomForm),p=s()(t,["children","title","triggerElement","size","initialValues","validate","toastMessages","isCustomForm"]);return u.a.createElement(u.a.Fragment,null,!m&&u.a.createElement("button",{className:"btn-as-link",onClick:this.openFormDialog},i),u.a.createElement(h.d,o()({initialValues:l,enableReinitialize:!0,onSubmit:this.onSubmit,onReset:this.onReset,validate:c},p),t=>m?u.a.createElement(h.c,null,n(t)):u.a.createElement(u.a.Fragment,null,e&&u.a.createElement(g.a,{open:!0,onClose:this.closeFormDialog.bind(this,t),modalClass:"profile-edit-form",title:a,size:r},u.a.createElement(h.c,null,n(t),u.a.createElement("div",{className:"form-footer-buttons"},u.a.createElement(f.h,{className:"cancel-btn ui-btn-line-primary",type:"button",onClick:this.closeFormDialog.bind(this,t)},"Cancel"),u.a.createElement(v.b,{className:"ui-btn-primary",onClick:this.sendSubmitMetrics},"Save")))))))}}l()(N,"propTypes",{initialValues:d.a.object.isRequired,mapValues:d.a.function,validate:d.a.func,onSubmit:d.a.func,onReset:d.a.func,onSuccess:d.a.func,onFailure:d.a.func,children:d.a.func.isRequired,profile:d.a.object.isRequired,profileActions:d.a.object.isRequired,title:d.a.string.isRequired,size:d.a.oneOf(["small","medium","full"]),triggerElement:d.a.element.isRequired,sendMetrics:d.a.func.isRequired,toastMessages:d.a.shape({submit:d.a.oneOfType([d.a.boolean,d.a.string]),success:d.a.oneOfType([d.a.boolean,d.a.string]),error:d.a.oneOfType([d.a.boolean,d.a.string])})}),l()(N,"defaultProps",{size:"small",toastMessages:{submit:"Updating Profile...",success:"Profile updated successfully.",error:"Error while Updating profile details"}}),t.a=Object(m.c)(E.r,y.a)(N)},JXFg:function(e,t,n){},"UT2+":function(e,t,n){},n71R:function(e,t,n){"use strict";n("rGqo");var a=n("MVZn"),o=n.n(a),i=n("lSNA"),s=n.n(i),r=n("cDcd"),l=n.n(r),c=n("ANjH"),u=n("/MKj"),m=n("vN+2"),p=n.n(m),d=n("NruJ"),h=n("2wrv"),b=n("NXto"),g=n("gokM"),f=n("aHjf"),v=n("qbr2"),y=n("V6Zm"),E=n("KG4N"),N=n("bh43"),O=n("p5Jc"),_=n("Mp5Q"),k=n("6oFb"),F=n("jx0p"),C=n("IreD");n("JXFg");const w={type:"error_strong",icon:"ui-icon-cross",duration:2};class j extends r.PureComponent{constructor(){super(...arguments),s()(this,"prop",void 0),s()(this,"checkPhoneChanged",e=>{var t;const n=this.props.profile.phone||{},a=n.unverified_number||n.number,o=n.unverified_country_code||n.country_code;return!(!e.phoneNumber&&""!==e.phoneNumber||a===e.phoneNumber&&o===(null===(t=e.phoneCodeOption)||void 0===t?void 0:t.value))}),s()(this,"onUpdatePhone",e=>{const t=this.props,n=t.profileActions,a=t.callback;if(this.checkPhoneChanged(e)){const t=Object(N.k)(e);Boolean(e.phoneNumber)?n.updatePhone(t).then(e=>{var t,n;const a=e.errors;((null==a||null===(t=a.number)||void 0===t?void 0:t[0])||(null==a||null===(n=a.country_code)||void 0===n?void 0:n[0]))&&Object(C.f)("Something went wrong, please contact us.",w).show()}):n.deletePhone().catch(()=>{Object(C.f)("Something went wrong while updating phone number.",w).show()})}a&&a()})}mapValues(e){const t=e.country&&e.country.value,n=o()({},e);return delete n.phoneCodeOption,delete n.phoneNumber,delete n.phone,delete n.country,o()({country:t},n)}getInitialValues(){const e=this.props,t=e.profile,n=e.countriesOptions,a=t.jobs_headline,o=t.country,i=t.personal_first_name,s=t.personal_last_name,r=t.website,l=t.linkedin_url,c=t.phone,u=(null==c?void 0:c.unverified_number)||(null==c?void 0:c.number),m=(null==c?void 0:c.unverified_country_code)||(null==c?void 0:c.country_code);return{personal_first_name:i,personal_last_name:s,website:r,jobs_headline:a,country:o?Object(v.a)(n,o):{label:"",value:"N/A"},linkedin_url:l,phoneNumber:u,phone:c,phoneCodeOption:{label:m,value:m}}}render(){const e=this.props,t=e.countriesOptions,n=e.profile.phone,a=e.triggerElement,i=void 0===a?l.a.createElement("div",{className:"summary-edit-button"},l.a.createElement(d.a,null)):a,s=o()({},this.props.metrics,{attribute4:"IntroModal"}),r=this.getInitialValues();return l.a.createElement(k.a,{initialValues:r,mapValues:this.mapValues,title:"Edit Intro",triggerElement:i,metrics:s,onSuccess:this.onUpdatePhone,size:"medium"},e=>{var a;let o=e.values,i=e.setFieldValue,s=void 0===i?p.a:i,r=e.handleBlur;return l.a.createElement("div",{className:"hacker-summary-form"},l.a.createElement("div",{className:"hacker-summary-form-row"},l.a.createElement(b.a,{label:"First Name",wrapperClassName:"hacker-summary-form-first-name",component:g.a,name:"personal_first_name",validate:Object(v.d)([{test:y.a.required,message:"Required"}]),required:!0}),l.a.createElement(b.a,{label:"Last Name",wrapperClassName:"hacker-summary-form-last-name",component:g.a,name:"personal_last_name",validate:Object(v.d)([{test:y.a.required,message:"Required"}]),required:!0})),l.a.createElement(b.a,{label:"Headline",component:g.a,name:"jobs_headline",maxLength:80}),l.a.createElement(b.a,{label:"Website",component:g.a,name:"website"}),l.a.createElement(b.a,{label:"Country",component:f.e,name:"country",validate:Object(v.d)([{test:y.a.requiredOption,message:"Required"}]),isOptionUnique:v.b,options:t,required:!0}),l.a.createElement("div",{className:"hacker-summary-form-phone"},l.a.createElement(E.a,{countryOption:o.country,phone:n,phoneCode:null===(a=o.phoneCodeOption)||void 0===a?void 0:a.value,onBlur:r,verificationRequired:!1,setFieldValue:s,icon:h.a,iconAlignment:"right",placeholder:"Enter your phone",hintMessage:"Visible only to you",validationSchema:[{test:N.l,message:"Invalid phone number"}]})),l.a.createElement(b.a,{label:"LinkedIn URL",component:g.a,name:"linkedin_url",placeholder:"Add your LinkedIn URL"}),l.a.createElement("p",{className:"social-connect-label"},"Link Your Socials"),l.a.createElement("div",{className:"social-connect-btns"},l.a.createElement(O.a,{type:"github"}),l.a.createElement(O.a,{type:"facebook"})))})}}t.a=Object(c.c)(F.a,Object(u.d)(e=>({countriesOptions:Object(_.a)(e)})))(j)}}]);
//# sourceMappingURL=https://hrcdn.net/fcore/assets/sourcemaps/commons~hackerrank_r_jobs~hackerrank_r_profile_v2-722f1b18.js.map